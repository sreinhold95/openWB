import{B as c}from"./DataManagement-eb2fc5d7.js";import{_ as m,u as a,k as b,l as f,D as n,N as r,y as e,x as i}from"./vendor-f2b8aa6f.js";import"./vendor-fortawesome-71546160.js";import"./index-b0e5e618.js";import"./vendor-bootstrap-4ad604fa.js";import"./vendor-jquery-d3cb8fad.js";import"./vendor-axios-65ecee4b.js";import"./vendor-sortablejs-2f1828d0.js";import"./dynamic-import-helper-be004503.js";const g={name:"BackupCloudOneDrive",mixins:[c]},h={class:"backup-cloud-one-drive"},_=i("br",null,null,-1),v=i("br",null,null,-1),k=i("br",null,null,-1),w=i("br",null,null,-1),B=i("a",{href:"https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-device-code",target:"_blank",rel:"noopener noreferrer"},"https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-device-code",-1),C=i("a",{href:"https://learn.microsoft.com/en-us/azure/active-directory/develop/msal-client-applications",target:"_blank",rel:"noopener noreferrer"},"https://learn.microsoft.com/en-us/azure/active-directory/develop/msal-client-applications",-1);function y(t,o,A,D,z,W){const l=a("openwb-base-alert"),u=a("openwb-base-text-input"),p=a("openwb-base-heading"),d=a("openwb-base-button-input");return b(),f("div",h,[n(l,{subtype:"info"},{default:r(()=>[e(" Zum Abruf der Zugangsberechtigung bitte die Konfiguration speichern, dann die Schritte 1-4 durchführen und danach die Konfiguration erneut speichern. "),_,e(" Auth Code und URL werden nur einmal benötigt werden nach erfolgreicher Autorisierung wieder gelöscht. ")]),_:1}),n(u,{title:"Backupverzeichnis in OneDrive",subtype:"text",required:"",pattern:"^/(.*/)*","model-value":t.backupCloud.configuration.backuppath,"onUpdate:modelValue":o[0]||(o[0]=s=>t.updateConfiguration(s,"configuration.backuppath"))},{help:r(()=>[e(" In diesem Verzeichnis werden die Backupdateien erstellt. Bitte den Pfad mit / beenden. "),v,e(" Beispiel: /openWB/Backup/ ")]),_:1},8,["model-value"]),n(u,{title:"Anmeldedaten auf openWB gespeichert",readonly:"","model-value":t.backupCloud.configuration.persistent_tokencache?"Ja":"Nein"},null,8,["model-value"]),n(p,null,{default:r(()=>[e(" Zugang zu OneDrive für diese openWB autorisieren ")]),_:1}),n(d,{title:"1. Anmeldeanforderung erstellen",buttonText:"Autorisierungs-Code anfordern",subtype:"success",onButtonClicked:o[1]||(o[1]=s=>t.sendSystemCommand("requestMSALAuthCode",{}))},{help:r(()=>[e(" Es werden Zugangstokens für OneDrive angefordert. Diese werden nur lokal auf dieser openWB gespeichert. Genutzt wird Device Flow mit public application."),k,e(" Weitere Infos:"),w,B,C]),_:1}),n(u,{title:"2. Diesen Code kopieren",subtype:"text",readonly:"","model-value":t.backupCloud.configuration.authcode},null,8,["model-value"]),n(u,{title:"3. Anmelde-URL aufrufen",subtype:"url",readonly:"","model-value":t.backupCloud.configuration.authurl},{help:r(()=>[e(" Diese URL im Browser öffnen und den Code eingeben. Dies erzeugt die notwendigen Zugangsberechtigung für diese openWB. ")]),_:1},8,["model-value"]),n(d,{title:"4. Token abrufen und speichern",buttonText:"Autorisierungs-Token abrufen",subtype:"success",onButtonClicked:o[2]||(o[2]=s=>t.sendSystemCommand("retrieveMSALTokens",{}))},{help:r(()=>[e(" Zugangstoken wird abgerufen und gespeichert, damit das Backup durchgeführt werden kann. Zugangstoken werden nur lokal auf dieser openWB gespeichert. ")]),_:1})])}const U=m(g,[["render",y],["__file","/opt/openWB-dev/openwb-ui-settings/src/components/backup_clouds/onedrive/backup_cloud.vue"]]);export{U as default};
